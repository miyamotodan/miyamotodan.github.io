<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Misuratore di Distanze - Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <!-- Header con informazioni progetto -->
    <header class="navbar navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="fas fa-ruler"></i> Misuratore Distanze
            </span>
            <button class="btn btn-outline-light btn-sm" id="toggle-panel" type="button">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </header>

    <!-- Canvas area principale -->
    <div class="canvas-container">
        <canvas id="canvas"></canvas>
        
        <!-- Overlay per feedback visivo -->
        <div id="canvas-overlay">
            <div id="crosshair" class="crosshair"></div>
            <div id="touch-indicator" class="touch-indicator"></div>
        </div>
    </div>

    <!-- Pannello controlli collassabile -->
    <div class="control-panel" id="control-panel">
        <div class="panel-content">
            
            <!-- Sezione upload immagine -->
            <div class="section-card mb-3">
                <h6 class="section-title">
                    <i class="fas fa-image"></i> Carica Immagine
                </h6>
                <div class="upload-area">
                    <input type="file" id="upload" accept="image/*" hidden>
                    <label for="upload" class="upload-label">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Tocca per caricare</span>
                    </label>
                </div>
            </div>

            <!-- Sezione configurazione scala -->
            <div class="section-card mb-3">
                <h6 class="section-title">
                    <i class="fas fa-ruler-horizontal"></i> Configurazione Scala
                </h6>
                <div class="row g-2">
                    <div class="col-6">
                        <label class="form-label small">Riferimento (px)</label>
                        <input type="number" id="scale" value="1" class="form-control form-control-sm" step="0.1">
                    </div>
                    <div class="col-6">
                        <label class="form-label small">Misura reale (mm)</label>
                        <input type="number" id="real" value="1" class="form-control form-control-sm" step="0.1">
                    </div>
                </div>
                <div class="mt-2">
                    <label class="form-label small">Segmento selezionato (mm)</label>
                    <input type="text" id="realsel" disabled class="form-control form-control-sm result-display">
                </div>
            </div>

            <!-- Lista segmenti -->
            <div class="section-card mb-3">
                <h6 class="section-title">
                    <i class="fas fa-list"></i> Misure Effettuate
                    <button class="btn btn-outline-danger btn-sm ms-auto" id="deleteall">
                        <i class="fas fa-trash"></i>
                    </button>
                </h6>
                <div id="segments-list" class="segments-list">
                    <div class="no-segments text-muted small text-center py-2">
                        Nessun segmento creato
                    </div>
                </div>
            </div>

            <!-- Controlli navigazione -->
            <div class="section-card">
                <h6 class="section-title">
                    <i class="fas fa-arrows-alt"></i> Controlli Navigazione
                </h6>
                
                <!-- Controlli zoom -->
                <div class="zoom-controls mb-3">
                    <button class="btn btn-outline-secondary" id="zoom-out">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <span class="zoom-level mx-2" id="zoom-level">100%</span>
                    <button class="btn btn-outline-secondary" id="zoom-in">
                        <i class="fas fa-search-plus"></i>
                    </button>
                    <button class="btn btn-outline-secondary ms-2" id="reset">
                        <i class="fas fa-expand-arrows-alt"></i>
                    </button>
                </div>

                <!-- D-pad per navigazione -->
                <div class="dpad-container">
                    <div class="dpad">
                        <button class="dpad-btn dpad-up" id="yminus">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                        <button class="dpad-btn dpad-left" id="xminus">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="dpad-btn dpad-center" id="center">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                        <button class="dpad-btn dpad-right" id="xplus">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="dpad-btn dpad-down" id="yplus">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Toast per notifiche -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <i class="fas fa-info-circle text-primary me-2"></i>
                <strong class="me-auto">Info</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-body">
                Messaggio di notifica
            </div>
        </div>
    </div>

    <!-- Modali per conferme -->
    <div class="modal fade" id="confirmModal" tabindex="-1">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title">Conferma</h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modal-body">
                    Sei sicuro di voler procedere?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Annulla</button>
                    <button type="button" class="btn btn-danger btn-sm" id="confirm-action">Conferma</button>
                </div>
            </div>
        </div>
    </div>

    <script src="bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>

</body>

</html>